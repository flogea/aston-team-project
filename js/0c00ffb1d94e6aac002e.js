(()=>{"use strict";var e,r,t,n={232:(e,r,t)=>{var n=t(745),a=t(998),s=t(655),i=t(294),o=t(335),c=()=>(0,a.I0)(),l=a.v9,u=t(791),d=t(168),h=(0,d.oM)({name:"auth",initialState:{statusAuth:"LOADING",email:null,uid:""},reducers:{setAuthUser(e,r){e.email=r.payload.email,e.uid=r.payload.uid,e.statusAuth="SUCCESS"},userNotFound(e){e.email=null,e.uid="",e.statusAuth="SUCCESS"}}}),{setAuthUser:v,userNotFound:f}=h.actions;const p=h.reducer;var m=(0,d.oM)({name:"cards",initialState:{cardsData:[],saveCardsData:[]},reducers:{replaceCards(e,r){e.cardsData=r.payload},addMoreCards(e,r){e.cardsData.push(...r.payload)},removeCards(e){e.cardsData=[]}}}),{replaceCards:j,addMoreCards:y,removeCards:g}=m.actions;const b=m.reducer;var x=(0,d.oM)({name:"search",initialState:{searchValue:"",countPerPage:30,totalPages:0},reducers:{setSearchValue(e,r){e.searchValue=r.payload},resetSearch(e){e.searchValue=""},setTotalPages(e,r){var{payload:t}=r;e.totalPages=t}}}),{setSearchValue:P,resetSearch:O,setTotalPages:S}=x.actions;const w=x.reducer;var N=(0,d.oM)({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser(e,r){e.email=r.payload.email,e.token=r.payload.token,e.id=r.payload.id},removeUser(e){e.email=null,e.token=null,e.id=null}}}),{setUser:A,removeUser:_}=N.actions;const E=N.reducer;var k=e=>e.auth.uid,I=e=>e.auth.email,C=e=>e.auth.statusAuth,D=(0,u.UY)({user:E,search:w,cards:b,auth:p}),T=(0,d.xC)({reducer:D});function R(){var e=l(I);return{isAuth:!!e,email:e}}var U=t(893),B=["component"];function M(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function L(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function V(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var F=e=>{var{component:r}=e,t=V(e,B),{isAuth:n}=R();return n?(0,U.jsx)(r,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?M(Object(t),!0).forEach((function(r){L(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},t)):(0,U.jsx)(o.Fg,{to:"/login",replace:!0})},G=t(953);const H=t.p+"assets/fav-filled-2d60195711216266f4a8.png",J=t.p+"assets/fav-94d68ded12286cc7a798.png";var q=t(977),K=t(785),Y={apiKey:"MISSING_ENV_VAR".REACT_APP_FIREBASE_API_KEY,authDomain:"MISSING_ENV_VAR".REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_PROJECT_ID,storageBucket:"MISSING_ENV_VAR".REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_APP_ID},W=(0,q.ZF)(Y),X=(0,K.v0)(W),z=(0,G.ad)(W);const Q="t3s26QVSgcFUkHVBkvzg",Z="amvc2ZeBeTyXgURj4TYG",$="NWzt4LNtXuUqmCr7wwTQ",ee="sweITg5Z2tt3krWwZgK1",re="ZbKAyAgU6jerGgPQ5g9A",te="uOcb9zrYLDNLhc_hYWS2";function ne(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ne(Object(t),!0).forEach((function(r){se(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function se(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ie(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function oe(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){ie(s,n,a,i,o,"next",e)}function o(e){ie(s,n,a,i,o,"throw",e)}i(void 0)}))}}var ce=e=>{var{isAuth:r}=R(),{id:t,urls:n,alt_description:a,liked_by_user:o}=e,[c,u]=(0,i.useState)(o),d=l(k),h=e=>{e.preventDefault(),u((()=>!c))},v=function(){var r=oe((function*(){try{yield(0,G.pl)((0,G.JU)(z,"users/".concat(d,"/favorites"),t),ae(ae({},e),{},{liked_by_user:!0}))}catch(e){console.error("Ошибка при добавлении карточки в избранное: ",e)}}));return function(){return r.apply(this,arguments)}}(),f=function(){var e=oe((function*(e){yield(0,G.oe)((0,G.JU)(z,"users/".concat(d,"/favorites"),e))}));return function(r){return e.apply(this,arguments)}}();return(0,U.jsx)("div",{className:Q,children:(0,U.jsxs)(s.rU,{to:"/card?id=".concat(t),children:[(0,U.jsx)("div",{className:Z,children:(0,U.jsx)("button",{disabled:!r,title:r?"Add to favorites":"Authorize to add to favorites",className:$,onClick:c?e=>{h(e),f(t)}:e=>{h(e),v()},children:(0,U.jsx)("img",{src:c?H:J,alt:""})})}),(0,U.jsx)("div",{className:ee,children:(0,U.jsx)("img",{src:null==n?void 0:n.regular,alt:"image"})}),(0,U.jsx)("div",{className:re,children:(0,U.jsx)("div",{className:te,children:a&&a.length>100?"".concat(a.slice(0,100),"..."):a})})]})})};const le="bcvEoAGvxOleIuasmcg6";var ue=e=>{var{cards:r}=e,t=r.map((e=>{var{id:r,urls:t,alt_description:n,liked_by_user:a}=e;return(0,U.jsx)("li",{children:(0,U.jsx)(ce,{id:r,urls:t,alt_description:n,liked_by_user:a})},r)}));return(0,U.jsx)("ul",{className:le,children:t})},de=()=>(0,U.jsx)("svg",{viewBox:"0 0 32 32",width:"32",height:"32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,U.jsx)("path",{d:"M23.66 6.96 16 14.63 8.32 6.96 6.95 8.33 14.62 16l-7.67 7.67 1.37 1.37 7.67-7.68 7.67 7.68 1.37-1.37L17.36 16l7.67-7.67-1.37-1.37Z",fill:"inherit"})});const he="yxxp4Dpp6UIdHwxABVeG";var ve=e=>{var{title:r,handleSubmit:t}=e,[n,a]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),[c,l]=(0,i.useState)(""),[u,d]=(0,i.useState)("");return(0,U.jsxs)("form",{className:he,onSubmit:e=>{e.preventDefault(),t(n,s)},children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,U.jsx)("input",{type:"email",value:n,onChange:e=>{var r=e.target.value;a(r),(e=>{e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?l(""):l("Invalid email format"):l("Email is required")})(r)},placeholder:"Email",required:!0})]}),c&&(0,U.jsx)("p",{children:c}),(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,U.jsx)("input",{type:"password",value:s,onChange:e=>{var r=e.target.value;o(r),(e=>{e?e.length<6?d("Password must be at least 6 characters long"):d(""):d("Password is required")})(r)},placeholder:"Password",required:!0})]}),u&&(0,U.jsx)("p",{children:u}),(0,U.jsx)("button",{children:r})]})};const fe="dDRRXIIg4vAbQn8dQzmo",pe="S6rLE3BqBsddY5TPfdhg",me="g87VLBs39AwMWAOzcAff";var je=()=>(0,U.jsxs)(s.rU,{to:"/",className:fe,children:[(0,U.jsx)("h1",{className:pe,children:"Photo Gallery"}),(0,U.jsx)("p",{className:me,children:"find your mood"})]});const ye="lr2y5T6qgvpckfJ9StH9",ge="Dq0AwFGRf_CJ_F_WOfLZ",be="M3tvYWDWIXB5YMkbPf7o";var xe=e=>{var{fullscreen:r}=e;return(0,U.jsx)("div",{className:"".concat(ye," ").concat(r&&ge),children:(0,U.jsx)("span",{className:be})})};const Pe="fIx_CB_Dp1B5CT0nSuBm",Oe="U1DnwO2qYxKLL1LqlTFX",Se="bqMkJLwVtyT9pESoUdMK";function we(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}var Ne=()=>{var e=c(),r=(0,o.s0)(),{isAuth:t,email:n}=R(),a=function(){var t,n=(t=function*(){try{yield(0,K.w7)(X),e(_()),r("/")}catch(e){console.error(e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(e){we(s,n,a,i,o,"next",e)}function o(e){we(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();if("SUCCESS"!==l(C))return(0,U.jsx)(xe,{fullscreen:!0});var i=e=>{var{isActive:r}=e;return r?Oe:""};return(0,U.jsx)("nav",{className:Pe,children:t?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(s.OL,{to:"/favorites",className:i,children:"Favorites"}),(0,U.jsx)(s.OL,{to:"/history",className:i,children:"History"}),(0,U.jsxs)("button",{onClick:()=>a(),className:Se,children:["Log out from ",(0,U.jsx)("span",{children:n})]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(s.OL,{to:"/login",className:i,children:"Login"}),(0,U.jsx)(s.OL,{to:"/register",className:i,children:"Register"})]})})},Ae=()=>(0,U.jsx)("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,U.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})});const _e="k5rxhHqufc0wTH_iRBgY",Ee="S898CJNNo9cb_xQn4FBI";var ke=()=>(0,U.jsx)("header",{className:_e,children:(0,U.jsxs)("div",{className:Ee,children:[(0,U.jsx)(je,{}),(0,U.jsx)(Ne,{})]})});const Ie="QcyAwWrXP4IvTyugCBDk",Ce="zwrmBObIHf75VWaw38yw";var De=e=>{var{children:r}=e;return(0,U.jsxs)("div",{className:Ie,children:[(0,U.jsx)(ke,{}),(0,U.jsx)("main",{className:Ce,children:r})]})};const Te="kIwoKeY1ahkooJTXbu5k",Re="kioBQlhTvvd5Aum2TU03",Ue="XsniiaeK_STDgsIj1Oog",Be="ajFuQufx5wCXf2dNC1RP";var Me=e=>{var{onSubmit:r}=e,t=c(),[n,a]=(0,i.useState)(""),s=(0,i.useRef)(null),o=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,i.useRef)();function a(){n.current&&(clearTimeout(n.current),n.current=void 0)}return(0,i.useEffect)((()=>t?a:void 0),[t]),function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];a(),n.current=setTimeout((()=>e(...s)),r)}}((e=>t(P(e))),500,!0);return(0,i.useEffect)((()=>()=>{t(O())}),[t]),(0,U.jsxs)("form",{className:Te,onSubmit:function(e){e.preventDefault(),r(n)},name:"search",children:[(0,U.jsx)("input",{className:Re,ref:s,value:n,placeholder:"Find a photo for you",onChange:function(e){a(e.target.value),o(e.target.value)}}),n&&(0,U.jsx)("button",{className:Ue,type:"button","aria-label":"clear input",onClick:function(){var e;a(""),t(O()),null===(e=s.current)||void 0===e||e.focus()},children:(0,U.jsx)(de,{})}),(0,U.jsx)("button",{type:"submit",className:Be,disabled:!n.length,"aria-label":"Search",children:(0,U.jsx)(Ae,{})})]})};const Le="nlWODRnelZwk8H1WSwb3",Ve="tRTLbVEQAzT1QRMCc1PM",Fe="CdPc0hE8Dg8KmcnLx3cE",Ge="kmzUaLH__6hRQyiA0kIw",He="Ys99cJte9zU9W_qELMT5",Je="XAST3IQBuGPp_yosKtEo",qe="maDGhwQedZYPPrckXRM1";var Ke=e=>{var{id:r,alt_description:t="no description",thumb:n,owner:a,likes:i=0}=e;return(0,U.jsxs)("article",{className:Le,children:[(0,U.jsx)(s.rU,{to:"/card?id=".concat(r),className:Ve}),(0,U.jsx)("div",{className:Fe,children:(0,U.jsx)("img",{src:n,alt:t})}),(0,U.jsx)("h2",{className:Je,children:t}),(0,U.jsx)("p",{className:He,children:"by ".concat(a)}),(0,U.jsxs)("p",{className:Ge,children:[(0,U.jsx)("span",{role:"img","aria-label":"heart",children:"❤️"})," ",i]}),(0,U.jsx)("span",{className:qe,children:"→"})]})};const Ye="TD1HD6cN_5HU7pXRZlxa",We="PQyGLGo76sk88jGeFpf5",Xe="cIBHfP8MjIO0mJykMJa2",ze="E8ykriKZvDPoO7oOFtns";var Qe=e=>{var{photos:r,visible:t,errorMessage:n=""}=e,a=r.map((e=>{var{id:r,alt_description:t,urls:n,user:a,likes:s}=e;return(0,U.jsx)("li",{children:(0,U.jsx)(Ke,{id:r,alt_description:t,thumb:n.thumb,owner:a.name,likes:s})},r)}));return(0,U.jsx)("div",{className:"".concat(Ye," ").concat(t&&Xe),id:"bar","aria-label":"Suggestions Bar",children:n?(0,U.jsx)("p",{className:ze,children:n}):(0,U.jsx)("ul",{className:We,children:a})})};function Ze(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function $e(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){Ze(s,n,a,i,o,"next",e)}function o(e){Ze(s,n,a,i,o,"throw",e)}i(void 0)}))}}var er={baseURL:"https://api.unsplash.com",headers:{Authorization:"Client-ID ".concat("iRxshX7iJu-wBOq-ZAfABikP23HpyIZ2CDpbck9JcLw")}},rr=function(){var e=$e((function*(e){return e.ok?e.json():e.json().then((e=>Promise.reject(null==e?void 0:e.errors[0])))}));return function(r){return e.apply(this,arguments)}}(),tr=function(){var e=$e((function*(e){var{endPoint:r,body:t,method:n}=e;try{var{baseURL:a,headers:s}=er,i={headers:s,method:n||"GET"};t&&(i.body=JSON.stringify(t));var o=yield fetch("".concat(a).concat(r),i);return rr(o)}catch(e){return Promise.reject("Unexpected error from makeRequest")}}));return function(r){return e.apply(this,arguments)}}(),nr=e=>{var r=[];for(var t in e)e[t]&&r.push("".concat(t,"=").concat(e[t]));return"?"+r.join("&")},ar=e=>tr({endPoint:"/photos/".concat(e)}),sr=e=>{var r="";return e&&(r=nr(e)),tr({endPoint:"/photos".concat(r)})},ir=e=>{var r="";return e&&(r=nr(e)),tr({endPoint:"/photos/random".concat(r)})},or=e=>{var r=nr(e);return tr({endPoint:"/search/photos".concat(r)})};const cr="lkajQKCidxJ9BGKaIToL";function lr(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}var ur=()=>{var e=c(),r=l(k),[t,n]=(0,i.useState)(!1),[a,s]=(0,i.useState)([]),[o,u]=(0,i.useState)(""),{isAuth:d}=R(),{searchValue:h,countPerPage:v}=l((e=>e.search)),f=function(){var t,a=(t=function*(t){if(n(!1),or({query:t,per_page:v,page:1}).then((r=>{var{results:t,total_pages:n}=r;e(j(t)),e(S(n))})).catch(console.log),d)try{yield(0,G.pl)((0,G.JU)(z,"users/".concat(r,"/searchHistory"),t),{searchValue:t})}catch(e){console.error("Ошибка при добавлении параметра поиска: ",e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(e){lr(s,n,a,i,o,"next",e)}function o(e){lr(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}(),p=e=>{u("string"==typeof e?e:"An error occurred during the request. Please try again later."),s([])};return(0,i.useEffect)((()=>{u(""),h&&ir({count:5,query:h}).then((e=>{s(e)})).catch(p).finally((()=>n(!0)))}),[h]),(0,i.useEffect)((()=>{var e=e=>{t&&!e.target.closest("section")&&n(!1)};return t&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[t]),(0,U.jsxs)("section",{className:cr,children:[(0,U.jsx)(Me,{onSubmit:f}),(0,U.jsx)(Qe,{photos:a,visible:t&&h.length>0,errorMessage:o})]})};const dr={cardPage:"KJtAPu_Cnoijkj2S0QAw",cardInfo:"EklOGZMCgGTOhK40Q9k1",cardImage:"pSlmUVy_0sa_pz0wteQ8",cardDescription:"BGgAqLKXk42y7c0JtmYV",title:"SNoz5zU2p4uwGAeFtlH9",extraInfo:"NY1lFrOd_RJg2i6XJyF9",author:"sdxTcX9qj5tOfomBr9vr",location:"gw3XbhzPk7uJmk3A_wAh",othersPosts:"HqW1R4WykOyRHOIjfeYS",posts:"vppp4ePSNtO_JmfkMC7e"};function hr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function vr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?hr(Object(t),!0).forEach((function(r){fr(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function fr(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function pr(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function mr(){var e,r,t,n=(0,o.TH)(),a=l(k),[s,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(null),{isAuth:h}=R(),v=(0,i.useCallback)(function(){var e,r=(e=function*(e){var r,t=yield ar(e);if(c(t),h)try{yield(0,G.pl)((0,G.JU)(z,"users/".concat(a,"/cardsHistory"),e),vr({},t))}catch(e){console.error("Ошибка при добавлении карточки в историю: ",e)}var n=null==t||null===(r=t.topics[0])||void 0===r?void 0:r.id,s=yield ir({topics:n,orientation:"portrait",count:20});d(s)},function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){pr(s,n,a,i,o,"next",e)}function o(e){pr(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),[a]);return(0,i.useLayoutEffect)((()=>{var e=new URLSearchParams(window.location.search).get("id");v(e)}),[n,v]),(0,U.jsxs)("div",{className:dr.cardPage,children:[s&&(0,U.jsxs)("section",{className:dr.cardInfo,children:[(0,U.jsx)("div",{className:dr.cardImage,children:(0,U.jsx)("img",{src:null==s||null===(e=s.urls)||void 0===e?void 0:e.regular,alt:""})}),(0,U.jsxs)("div",{className:dr.cardDescription,children:[(0,U.jsx)("div",{className:dr.title,children:(0,U.jsx)("h2",{children:null==s?void 0:s.description})}),(0,U.jsxs)("div",{className:dr.extraInfo,children:[(0,U.jsx)("div",{className:dr.author,children:null==s||null===(r=s.user)||void 0===r?void 0:r.name}),(0,U.jsxs)("div",{className:dr.location,children:[null==s||null===(t=s.location)||void 0===t?void 0:t.country,s.location.city?", ".concat(s.location.city):"Unknown location"]})]})]})]}),(0,U.jsxs)("section",{className:dr.othersPosts,children:[(0,U.jsx)("h2",{children:"You might like it"}),(0,U.jsx)("ul",{className:dr.posts,children:u&&u.map((e=>(0,U.jsx)("li",{children:(0,U.jsx)(ce,vr({},e),e.id)},e.id)))})]})]})}var jr=()=>{var e=c(),r=(0,o.s0)();return(0,U.jsx)(ve,{title:"Sign In",handleSubmit:(t,n)=>{(0,K.e5)(X,t,n).then((t=>{var{user:n}=t;e(A({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch((()=>alert("Invalid user!")))}})},yr=()=>{var{isAuth:e}=R(),r=(0,o.s0)();return e&&r("/"),(0,U.jsxs)("div",{className:"authContainer",children:[(0,U.jsx)("h1",{children:"Login"}),(0,U.jsx)(jr,{}),(0,U.jsxs)("p",{children:["Don't have an account? ",(0,U.jsx)(s.rU,{to:"/register",children:"Register here"})]})]})},gr=()=>{var e=c(),r=(0,o.s0)();return(0,U.jsx)(ve,{title:"Sign Out",handleSubmit:(t,n)=>{(0,K.Xb)(X,t,n).then((t=>{var{user:n}=t;e(A({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch(console.error)}})},br=()=>{var{isAuth:e}=R(),r=(0,o.s0)();return e&&r("/"),(0,U.jsxs)("div",{className:"authContainer",children:[(0,U.jsx)("h1",{children:"Register"}),(0,U.jsx)(gr,{}),(0,U.jsxs)("p",{children:["Already have an account? ",(0,U.jsx)(s.rU,{to:"/login",children:"Sign in"})]})]})},xr=()=>{var[e,r]=(0,i.useState)([]),t=l(k),[n,a]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{a(!0);var e=(0,G.cf)((0,G.hJ)(z,"users/".concat(t,"/favorites")),(e=>{var t=e.docs.map((e=>e.data()));r(t),a(!1)}));return()=>e()}),[t]),(0,U.jsxs)(U.Fragment,{children:[n&&(0,U.jsx)(xe,{}),!n&&e.length>0&&(0,U.jsx)(ue,{cards:e}),!n&&0===e.length&&(0,U.jsx)("h2",{children:"You have no favorites"})]})};function Pr(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function Or(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){Pr(s,n,a,i,o,"next",e)}function o(e){Pr(s,n,a,i,o,"throw",e)}i(void 0)}))}}const Sr="GRbRIY8KlgqcpHaT1A6O";var wr=()=>{var e=c(),{cardsData:r}=l((e=>e.cards)),{countPerPage:t}=l((e=>e.search)),[n,a]=(0,i.useState)(!1);return function(){var e=c(),[r,t]=(0,i.useState)(2),[n,a]=(0,i.useState)(!1),{searchValue:s,countPerPage:o,totalPages:u}=l((e=>e.search)),d=(0,i.useCallback)(Or((function*(){var n;if(s){var{results:i}=yield or({query:s,page:r,per_page:o});n=i}else n=yield sr({page:r,per_page:o});e(y(n)),t((e=>e+1)),a(!1)})),[e,r,s,o]);(0,i.useEffect)((()=>{if(n){if(u&&u<r)return void a(!1);d()}}),[n,d,r,u]),(0,i.useEffect)((()=>(document.addEventListener("scroll",h),function(){document.removeEventListener("scroll",h)})),[]);var h=e=>{e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&a(!0)}}(),(0,i.useEffect)((()=>{r.length||(a(!0),sr({page:1,per_page:t}).then((r=>{e(j(r))})).catch(console.log).finally((()=>{a(!1)})))}),[r.length,e,t]),(0,U.jsxs)("div",{className:Sr,children:[(0,U.jsx)(ur,{}),n&&(0,U.jsx)(xe,{}),!n&&r.length>0&&(0,U.jsx)(ue,{cards:r})]})};const Nr="zL5jDhxyHZEFGIR399CC",Ar="X1uMAynGbM_EvqQCAGKY",_r="RtBbPB1p3DrsPIhNNbBX",Er="XlkSyiFtif7y4fJ2_5Ct",kr="WYKHJaYO1N1tQRP4PnDm";function Ir(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Cr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ir(Object(t),!0).forEach((function(r){Dr(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ir(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Dr(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Tr(e,r,t,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}const Rr=function(){var e=c(),r=(0,o.s0)(),[t,n]=(0,i.useState)([]),[a,s]=(0,i.useState)([]),u=l(k),[d,h]=(0,i.useState)(!1);(0,i.useEffect)((()=>{h(!0);var e=(0,G.cf)((0,G.hJ)(z,"users/".concat(u,"/cardsHistory")),(e=>{var r=e.docs.map((e=>e.data()));n(r.reverse()),h(!1)})),r=(0,G.cf)((0,G.hJ)(z,"users/".concat(u,"/searchHistory")),(e=>{var r=e.docs.map((e=>e.data()));s(r.reverse()),h(!1)}));return()=>{e(),r()}}),[u]);var v=function(){var t,n=(t=function*(t){or({query:t,per_page:20}).then((r=>{e(j(r.results))})).catch(console.log).finally((()=>r("/")))},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(e){Tr(s,n,a,i,o,"next",e)}function o(e){Tr(s,n,a,i,o,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return d?(0,U.jsx)(xe,{}):(0,U.jsxs)("div",{className:Nr,children:[(0,U.jsx)("h2",{children:"Cards you've looked at"}),null!=t&&t.length?(0,U.jsx)("ul",{className:Ar,children:t.map(((e,r)=>(0,U.jsx)("li",{children:(0,U.jsx)(ce,Cr({},e))},r)))}):(0,U.jsx)("p",{className:kr,children:"You haven't looked at any cards yet"}),(0,U.jsx)("h2",{children:"Search history"}),null!=a&&a.length?(0,U.jsx)("ul",{className:_r,children:a.map(((e,r)=>(0,U.jsx)("li",{className:Er,onClick:()=>v(e.searchValue),children:e.searchValue},r)))}):(0,U.jsx)("p",{className:kr,children:"You haven't searched for anything yet"})]})},Ur="vrNuVB8A4modZMRW46_n",Br="MDaoXD0zx4g0qVFozIpL",Mr="b_1Zox2nlTI8sv7BKEX4",Lr="KT2lhf6TUn2ZuPUOuFME",Vr="d44UssZEHzOGhqUKsckQ";var Fr=()=>{var e=(0,o.s0)();return(0,U.jsxs)("section",{className:Ur,children:[(0,U.jsx)("p",{className:Br,children:"404"}),(0,U.jsx)("h2",{className:Mr,children:"Page not found"}),(0,U.jsx)("nav",{children:(0,U.jsxs)("ul",{className:Lr,children:[(0,U.jsx)("li",{children:(0,U.jsx)("button",{onClick:()=>e(-1),className:Vr,type:"button",children:"Back"})}),(0,U.jsx)("li",{children:(0,U.jsx)("button",{onClick:()=>e("/",{replace:!0}),className:Vr,type:"button",children:"Main page"})})]})})]})},Gr=(0,d.hg)("auth/checkAuth",((e,r)=>{var{dispatch:t}=r;(0,K.Aj)(X,(e=>t(e?v({email:e.email,uid:e.uid}):f())))}));const Hr=function(){var e=c(),r=l(C);return(0,i.useEffect)((()=>{e(Gr())}),[e]),"LOADING"===r?(0,U.jsx)(xe,{fullscreen:!0}):(0,U.jsx)(De,{children:(0,U.jsxs)(o.Z5,{children:[(0,U.jsx)(o.AW,{path:"/",element:(0,U.jsx)(wr,{})}),(0,U.jsx)(o.AW,{path:"/login",element:(0,U.jsx)(yr,{})}),(0,U.jsx)(o.AW,{path:"/register",element:(0,U.jsx)(br,{})}),(0,U.jsx)(o.AW,{path:"/card",element:(0,U.jsx)(mr,{})}),(0,U.jsx)(o.AW,{path:"/favorites",element:(0,U.jsx)(F,{component:xr})}),(0,U.jsx)(o.AW,{path:"/history",element:(0,U.jsx)(F,{component:Rr})}),(0,U.jsx)(o.AW,{path:"*",element:(0,U.jsx)(Fr,{})})]})})};(0,n.s)(document.getElementById("root")).render((0,U.jsx)(a.zt,{store:T,children:(0,U.jsx)(s.VK,{basename:"dist",children:(0,U.jsx)(Hr,{})})}))}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var t=a[e]={exports:{}};return n[e](t,t.exports,s),t.exports}s.m=n,e=[],s.O=(r,t,n,a)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){for(var[t,n,a]=e[u],o=!0,c=0;c<t.length;c++)(!1&a||i>=a)&&Object.keys(s.O).every((e=>s.O[e](t[c])))?t.splice(c--,1):(o=!1,a<i&&(i=a));if(o){e.splice(u--,1);var l=n();void 0!==l&&(r=l)}}return r}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,n,a]},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);s.r(a);var i={};r=r||[null,t({}),t([]),t(t)];for(var o=2&n&&e;"object"==typeof o&&!~r.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((r=>i[r]=()=>e[r]));return i.default=()=>e,s.d(a,i),a},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var n=t.length-1;n>-1&&!e;)e=t[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{var e={143:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var n,a,[i,o,c]=t,l=0;if(i.some((r=>0!==e[r]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(c)var u=c(s)}for(r&&r(t);l<i.length;l++)a=i[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},t=self.webpackChunkgallery=self.webpackChunkgallery||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var i=s.O(void 0,[809],(()=>s(232)));i=s.O(i)})();
//# sourceMappingURL=0c00ffb1d94e6aac002e.js.map