(()=>{"use strict";var e,r,t,n={232:(e,r,t)=>{var n=t(745),a=t(998),s=t(655),o=t(294),i=t(335),c=()=>(0,a.I0)(),l=a.v9,u=t(791),d=t(168),h=(0,d.oM)({name:"auth",initialState:{statusAuth:"LOADING",email:null,uid:""},reducers:{setAuthUser(e,r){e.email=r.payload.email,e.uid=r.payload.uid,e.statusAuth="SUCCESS"},userNotFound(e){e.email=null,e.uid="",e.statusAuth="SUCCESS"}}}),{setAuthUser:v,userNotFound:f}=h.actions;const p=h.reducer;var m=(0,d.oM)({name:"cards",initialState:{cardsData:[],saveCardsData:[]},reducers:{replaceCards(e,r){e.cardsData=r.payload},addMoreCards(e,r){e.cardsData.push(...r.payload)},removeCards(e){e.cardsData=[]}}}),{replaceCards:j,addMoreCards:y,removeCards:g}=m.actions;const b=m.reducer;var x=(0,d.oM)({name:"search",initialState:{searchValue:"",countPerPage:30,totalPages:0},reducers:{setSearchValue(e,r){e.searchValue=r.payload},resetSearch(e){e.searchValue=""},setTotalPages(e,r){var{payload:t}=r;e.totalPages=t}}}),{setSearchValue:P,resetSearch:O,setTotalPages:S}=x.actions;const w=x.reducer;var N=(0,d.oM)({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser(e,r){e.email=r.payload.email,e.token=r.payload.token,e.id=r.payload.id},removeUser(e){e.email=null,e.token=null,e.id=null}}}),{setUser:_,removeUser:A}=N.actions;const E=N.reducer;var k=e=>e.auth.uid,I=e=>e.auth.email,C=e=>e.auth.statusAuth,D=(0,u.UY)({user:E,search:w,cards:b,auth:p}),R=(0,d.xC)({reducer:D});function T(){var e=l(I);return{isAuth:!!e,email:e}}var U=t(893),M=["component"];function B(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function L(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function V(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var G=e=>{var{component:r}=e,t=V(e,M),{isAuth:n}=T();return n?(0,U.jsx)(r,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?B(Object(t),!0).forEach((function(r){L(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},t)):(0,U.jsx)(i.Fg,{to:"/login",replace:!0})},F=t(953);const H=t.p+"assets/fav-filled-2d60195711216266f4a8.png",q=t.p+"assets/fav-94d68ded12286cc7a798.png";var J=t(977),K=t(785),Y={apiKey:"MISSING_ENV_VAR".REACT_APP_FIREBASE_API_KEY,authDomain:"MISSING_ENV_VAR".REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_PROJECT_ID,storageBucket:"MISSING_ENV_VAR".REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:"MISSING_ENV_VAR".REACT_APP_FIREBASE_APP_ID},W=(0,J.ZF)(Y),z=(0,K.v0)(W),Q=(0,F.ad)(W);const X="t3s26QVSgcFUkHVBkvzg",Z="amvc2ZeBeTyXgURj4TYG",$="NWzt4LNtXuUqmCr7wwTQ",ee="sweITg5Z2tt3krWwZgK1",re="ZbKAyAgU6jerGgPQ5g9A",te="uOcb9zrYLDNLhc_hYWS2";function ne(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ne(Object(t),!0).forEach((function(r){se(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function se(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function oe(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function ie(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){oe(s,n,a,o,i,"next",e)}function i(e){oe(s,n,a,o,i,"throw",e)}o(void 0)}))}}var ce=e=>{var{isAuth:r}=T(),{id:t,urls:n,alt_description:a,liked_by_user:i}=e,[c,u]=(0,o.useState)(i),d=l(k),h=e=>{e.preventDefault(),u((()=>!c))},v=function(){var r=ie((function*(){try{yield(0,F.pl)((0,F.JU)(Q,"users/".concat(d,"/favorites"),t),ae(ae({},e),{},{liked_by_user:!0}))}catch(e){console.error("Ошибка при добавлении карточки в избранное: ",e)}}));return function(){return r.apply(this,arguments)}}(),f=function(){var e=ie((function*(e){yield(0,F.oe)((0,F.JU)(Q,"users/".concat(d,"/favorites"),e))}));return function(r){return e.apply(this,arguments)}}();return(0,U.jsx)("div",{className:X,children:(0,U.jsxs)(s.rU,{to:"/card?id=".concat(t),children:[(0,U.jsx)("div",{className:Z,children:(0,U.jsx)("button",{disabled:!r,title:r?"Add to favorites":"Authorize to add to favorites",className:$,onClick:c?e=>{h(e),f(t)}:e=>{h(e),v()},children:(0,U.jsx)("img",{src:c?H:q,alt:""})})}),(0,U.jsx)("div",{className:ee,children:(0,U.jsx)("img",{src:null==n?void 0:n.regular,alt:"image"})}),(0,U.jsx)("div",{className:re,children:(0,U.jsx)("div",{className:te,children:a&&a.length>100?"".concat(a.slice(0,100),"..."):a})})]})})};const le="bcvEoAGvxOleIuasmcg6";var ue=e=>{var{cards:r}=e,t=r.map((e=>{var{id:r,urls:t,alt_description:n,liked_by_user:a}=e;return(0,U.jsx)("li",{children:(0,U.jsx)(ce,{id:r,urls:t,alt_description:n,liked_by_user:a})},r)}));return(0,U.jsx)("ul",{className:le,children:t})},de=()=>(0,U.jsx)("svg",{viewBox:"0 0 32 32",width:"32",height:"32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,U.jsx)("path",{d:"M23.66 6.96 16 14.63 8.32 6.96 6.95 8.33 14.62 16l-7.67 7.67 1.37 1.37 7.67-7.68 7.67 7.68 1.37-1.37L17.36 16l7.67-7.67-1.37-1.37Z",fill:"inherit"})});const he="yxxp4Dpp6UIdHwxABVeG";var ve=e=>{var{title:r,handleSubmit:t}=e,[n,a]=(0,o.useState)(""),[s,i]=(0,o.useState)(""),[c,l]=(0,o.useState)(""),[u,d]=(0,o.useState)("");return(0,U.jsxs)("form",{className:he,onSubmit:e=>{e.preventDefault(),t(n,s)},children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,U.jsx)("input",{type:"email",value:n,onChange:e=>{var r=e.target.value;a(r),(e=>{e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?l(""):l("Invalid email format"):l("Email is required")})(r)},placeholder:"Email",required:!0})]}),c&&(0,U.jsx)("p",{children:c}),(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,U.jsx)("input",{type:"password",value:s,onChange:e=>{var r=e.target.value;i(r),(e=>{e?e.length<6?d("Password must be at least 6 characters long"):d(""):d("Password is required")})(r)},placeholder:"Password",required:!0})]}),u&&(0,U.jsx)("p",{children:u}),(0,U.jsx)("button",{children:r})]})};const fe="dDRRXIIg4vAbQn8dQzmo",pe="S6rLE3BqBsddY5TPfdhg",me="g87VLBs39AwMWAOzcAff";var je=()=>(0,U.jsxs)(s.rU,{to:"/",className:fe,children:[(0,U.jsx)("h1",{className:pe,children:"Photo Gallery"}),(0,U.jsx)("p",{className:me,children:"find your mood"})]});const ye="lr2y5T6qgvpckfJ9StH9",ge="Dq0AwFGRf_CJ_F_WOfLZ",be="M3tvYWDWIXB5YMkbPf7o";var xe=e=>{var{fullscreen:r}=e;return(0,U.jsx)("div",{className:"".concat(ye," ").concat(r&&ge),children:(0,U.jsx)("span",{className:be})})};const Pe="fIx_CB_Dp1B5CT0nSuBm",Oe="U1DnwO2qYxKLL1LqlTFX",Se="bqMkJLwVtyT9pESoUdMK";function we(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}var Ne=()=>{var e=c(),r=(0,i.s0)(),{isAuth:t,email:n}=T(),a=function(){var t,n=(t=function*(){try{yield(0,K.w7)(z),e(A()),r("/")}catch(e){console.error(e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(e){we(s,n,a,o,i,"next",e)}function i(e){we(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();if("SUCCESS"!==l(C))return(0,U.jsx)(xe,{fullscreen:!0});var o=e=>{var{isActive:r}=e;return r?Oe:""};return(0,U.jsx)("nav",{className:Pe,children:t?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(s.OL,{to:"/favorites",className:o,children:"Favorites"}),(0,U.jsx)(s.OL,{to:"/history",className:o,children:"History"}),(0,U.jsxs)("button",{onClick:()=>a(),className:Se,children:["Log out from ",(0,U.jsx)("span",{children:n})]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(s.OL,{to:"/login",className:o,children:"Login"}),(0,U.jsx)(s.OL,{to:"/register",className:o,children:"Register"})]})})},_e=()=>(0,U.jsx)("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,U.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})});const Ae="k5rxhHqufc0wTH_iRBgY",Ee="S898CJNNo9cb_xQn4FBI";var ke=()=>(0,U.jsx)("header",{className:Ae,children:(0,U.jsxs)("div",{className:Ee,children:[(0,U.jsx)(je,{}),(0,U.jsx)(Ne,{})]})});const Ie="QcyAwWrXP4IvTyugCBDk",Ce="zwrmBObIHf75VWaw38yw";var De=e=>{var{children:r}=e;return(0,U.jsxs)("div",{className:Ie,children:[(0,U.jsx)(ke,{}),(0,U.jsx)("main",{className:Ce,children:r})]})};const Re="kIwoKeY1ahkooJTXbu5k",Te="kioBQlhTvvd5Aum2TU03",Ue="XsniiaeK_STDgsIj1Oog",Me="ajFuQufx5wCXf2dNC1RP";var Be=e=>{var{onSubmit:r}=e,t=c(),[n,a]=(0,o.useState)(""),s=(0,o.useRef)(null),i=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,o.useRef)();function a(){n.current&&(clearTimeout(n.current),n.current=void 0)}return(0,o.useEffect)((()=>t?a:void 0),[t]),function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];a(),n.current=setTimeout((()=>e(...s)),r)}}((e=>t(P(e))),500,!0);return(0,o.useEffect)((()=>()=>{t(O())}),[t]),(0,U.jsxs)("form",{className:Re,onSubmit:function(e){e.preventDefault(),r(n)},name:"search",children:[(0,U.jsx)("input",{className:Te,ref:s,value:n,placeholder:"Find a photo for you",onChange:function(e){a(e.target.value),i(e.target.value)}}),n&&(0,U.jsx)("button",{className:Ue,type:"button","aria-label":"clear input",onClick:function(){var e;a(""),t(O()),null===(e=s.current)||void 0===e||e.focus()},children:(0,U.jsx)(de,{})}),(0,U.jsx)("button",{type:"submit",className:Me,disabled:!n.length,"aria-label":"Search",children:(0,U.jsx)(_e,{})})]})};const Le="nlWODRnelZwk8H1WSwb3",Ve="tRTLbVEQAzT1QRMCc1PM",Ge="CdPc0hE8Dg8KmcnLx3cE",Fe="kmzUaLH__6hRQyiA0kIw",He="Ys99cJte9zU9W_qELMT5",qe="XAST3IQBuGPp_yosKtEo",Je="maDGhwQedZYPPrckXRM1";var Ke=e=>{var{id:r,alt_description:t="no description",thumb:n,owner:a,likes:o=0}=e;return(0,U.jsxs)("article",{className:Le,children:[(0,U.jsx)(s.rU,{to:"/card?id=".concat(r),className:Ve}),(0,U.jsx)("div",{className:Ge,children:(0,U.jsx)("img",{src:n,alt:t})}),(0,U.jsx)("h2",{className:qe,children:t}),(0,U.jsx)("p",{className:He,children:"by ".concat(a)}),(0,U.jsxs)("p",{className:Fe,children:[(0,U.jsx)("span",{role:"img","aria-label":"heart",children:"❤️"})," ",o]}),(0,U.jsx)("span",{className:Je,children:"→"})]})};const Ye="TD1HD6cN_5HU7pXRZlxa",We="PQyGLGo76sk88jGeFpf5",ze="cIBHfP8MjIO0mJykMJa2",Qe="E8ykriKZvDPoO7oOFtns";var Xe=e=>{var{photos:r,visible:t,errorMessage:n=""}=e,a=r.map((e=>{var{id:r,alt_description:t,urls:n,user:a,likes:s}=e;return(0,U.jsx)("li",{children:(0,U.jsx)(Ke,{id:r,alt_description:t,thumb:n.thumb,owner:a.name,likes:s})},r)}));return(0,U.jsx)("div",{className:"".concat(Ye," ").concat(t&&ze),id:"bar","aria-label":"Suggestions Bar",children:n?(0,U.jsx)("p",{className:Qe,children:n}):(0,U.jsx)("ul",{className:We,children:a})})},Ze={development:"MISSING_ENV_VAR".BASE_URL_DEV,production:"MISSING_ENV_VAR".BASE_URL_PROD}.production;function $e(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function er(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){$e(s,n,a,o,i,"next",e)}function i(e){$e(s,n,a,o,i,"throw",e)}o(void 0)}))}}var rr={baseURL:"https://api.unsplash.com",headers:{Authorization:"Client-ID ".concat("MISSING_ENV_VAR".UNSPLASH_API_ACCESS_KEY||"")}},tr=function(){var e=er((function*(e){return e.ok?e.json():e.json().then((e=>Promise.reject(null==e?void 0:e.errors[0])))}));return function(r){return e.apply(this,arguments)}}(),nr=function(){var e=er((function*(e){var{endPoint:r,body:t,method:n}=e;try{var{baseURL:a,headers:s}=rr,o={headers:s,method:n||"GET"};t&&(o.body=JSON.stringify(t));var i=yield fetch("".concat(a).concat(r),o);return tr(i)}catch(e){return Promise.reject("Unexpected error from makeRequest")}}));return function(r){return e.apply(this,arguments)}}(),ar=e=>{var r=[];for(var t in e)e[t]&&r.push("".concat(t,"=").concat(e[t]));return"?"+r.join("&")},sr=e=>nr({endPoint:"/photos/".concat(e)}),or=e=>{var r="";return e&&(r=ar(e)),nr({endPoint:"/photos".concat(r)})},ir=e=>{var r="";return e&&(r=ar(e)),nr({endPoint:"/photos/random".concat(r)})},cr=e=>{var r=ar(e);return nr({endPoint:"/search/photos".concat(r)})};const lr="lkajQKCidxJ9BGKaIToL";function ur(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}var dr=()=>{var e=c(),r=l(k),[t,n]=(0,o.useState)(!1),[a,s]=(0,o.useState)([]),[i,u]=(0,o.useState)(""),{isAuth:d}=T(),{searchValue:h,countPerPage:v}=l((e=>e.search)),f=function(){var t,a=(t=function*(t){if(n(!1),cr({query:t,per_page:v,page:1}).then((r=>{var{results:t,total_pages:n}=r;e(j(t)),e(S(n))})).catch(console.log),d)try{yield(0,F.pl)((0,F.JU)(Q,"users/".concat(r,"/searchHistory"),t),{searchValue:t})}catch(e){console.error("Ошибка при добавлении параметра поиска: ",e)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(e){ur(s,n,a,o,i,"next",e)}function i(e){ur(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}(),p=e=>{u("string"==typeof e?e:"An error occurred during the request. Please try again later."),s([])};return(0,o.useEffect)((()=>{u(""),h&&ir({count:5,query:h}).then((e=>{s(e)})).catch(p).finally((()=>n(!0)))}),[h]),(0,o.useEffect)((()=>{var e=e=>{t&&!e.target.closest("section")&&n(!1)};return t&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[t]),(0,U.jsxs)("section",{className:lr,children:[(0,U.jsx)(Be,{onSubmit:f}),(0,U.jsx)(Xe,{photos:a,visible:t&&h.length>0,errorMessage:i})]})};const hr={cardPage:"KJtAPu_Cnoijkj2S0QAw",cardInfo:"EklOGZMCgGTOhK40Q9k1",cardImage:"pSlmUVy_0sa_pz0wteQ8",cardDescription:"BGgAqLKXk42y7c0JtmYV",title:"SNoz5zU2p4uwGAeFtlH9",extraInfo:"NY1lFrOd_RJg2i6XJyF9",author:"sdxTcX9qj5tOfomBr9vr",location:"gw3XbhzPk7uJmk3A_wAh",othersPosts:"HqW1R4WykOyRHOIjfeYS",posts:"vppp4ePSNtO_JmfkMC7e"};function vr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function fr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?vr(Object(t),!0).forEach((function(r){pr(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function pr(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function mr(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function jr(){var e,r,t,n=(0,i.TH)(),a=l(k),[s,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),{isAuth:h}=T(),v=(0,o.useCallback)(function(){var e,r=(e=function*(e){var r,t=yield sr(e);if(c(t),h)try{yield(0,F.pl)((0,F.JU)(Q,"users/".concat(a,"/cardsHistory"),e),fr({},t))}catch(e){console.error("Ошибка при добавлении карточки в историю: ",e)}var n=null==t||null===(r=t.topics[0])||void 0===r?void 0:r.id,s=yield ir({topics:n,orientation:"portrait",count:20});d(s)},function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){mr(s,n,a,o,i,"next",e)}function i(e){mr(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),[a]);return(0,o.useLayoutEffect)((()=>{var e=new URLSearchParams(window.location.search).get("id");v(e)}),[n,v]),(0,U.jsxs)("div",{className:hr.cardPage,children:[s&&(0,U.jsxs)("section",{className:hr.cardInfo,children:[(0,U.jsx)("div",{className:hr.cardImage,children:(0,U.jsx)("img",{src:null==s||null===(e=s.urls)||void 0===e?void 0:e.regular,alt:""})}),(0,U.jsxs)("div",{className:hr.cardDescription,children:[(0,U.jsx)("div",{className:hr.title,children:(0,U.jsx)("h2",{children:null==s?void 0:s.description})}),(0,U.jsxs)("div",{className:hr.extraInfo,children:[(0,U.jsx)("div",{className:hr.author,children:null==s||null===(r=s.user)||void 0===r?void 0:r.name}),(0,U.jsxs)("div",{className:hr.location,children:[null==s||null===(t=s.location)||void 0===t?void 0:t.country,s.location.city?", ".concat(s.location.city):"Unknown location"]})]})]})]}),(0,U.jsxs)("section",{className:hr.othersPosts,children:[(0,U.jsx)("h2",{children:"You might like it"}),(0,U.jsx)("ul",{className:hr.posts,children:u&&u.map((e=>(0,U.jsx)("li",{children:(0,U.jsx)(ce,fr({},e),e.id)},e.id)))})]})]})}var yr=()=>{var e=c(),r=(0,i.s0)();return(0,U.jsx)(ve,{title:"Sign In",handleSubmit:(t,n)=>{(0,K.e5)(z,t,n).then((t=>{var{user:n}=t;e(_({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch((()=>alert("Invalid user!")))}})},gr=()=>{var{isAuth:e}=T(),r=(0,i.s0)();return e&&r("/"),(0,U.jsxs)("div",{className:"authContainer",children:[(0,U.jsx)("h1",{children:"Login"}),(0,U.jsx)(yr,{}),(0,U.jsxs)("p",{children:["Don't have an account? ",(0,U.jsx)(s.rU,{to:"/register",children:"Register here"})]})]})},br=()=>{var e=c(),r=(0,i.s0)();return(0,U.jsx)(ve,{title:"Sign Out",handleSubmit:(t,n)=>{(0,K.Xb)(z,t,n).then((t=>{var{user:n}=t;e(_({email:n.email,id:n.uid,token:n.refreshToken})),r("/")})).catch(console.error)}})},xr=()=>{var{isAuth:e}=T(),r=(0,i.s0)();return e&&r("/"),(0,U.jsxs)("div",{className:"authContainer",children:[(0,U.jsx)("h1",{children:"Register"}),(0,U.jsx)(br,{}),(0,U.jsxs)("p",{children:["Already have an account? ",(0,U.jsx)(s.rU,{to:"/login",children:"Sign in"})]})]})},Pr=()=>{var[e,r]=(0,o.useState)([]),t=l(k),[n,a]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{a(!0);var e=(0,F.cf)((0,F.hJ)(Q,"users/".concat(t,"/favorites")),(e=>{var t=e.docs.map((e=>e.data()));r(t),a(!1)}));return()=>e()}),[t]),(0,U.jsxs)(U.Fragment,{children:[n&&(0,U.jsx)(xe,{}),!n&&e.length>0&&(0,U.jsx)(ue,{cards:e}),!n&&0===e.length&&(0,U.jsx)("h2",{children:"You have no favorites"})]})};function Or(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}function Sr(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){Or(s,n,a,o,i,"next",e)}function i(e){Or(s,n,a,o,i,"throw",e)}o(void 0)}))}}const wr="GRbRIY8KlgqcpHaT1A6O";var Nr=()=>{var e=c(),{cardsData:r}=l((e=>e.cards)),{countPerPage:t}=l((e=>e.search)),[n,a]=(0,o.useState)(!1);return function(){var e=c(),[r,t]=(0,o.useState)(2),[n,a]=(0,o.useState)(!1),{searchValue:s,countPerPage:i,totalPages:u}=l((e=>e.search)),d=(0,o.useCallback)(Sr((function*(){var n;if(s){var{results:o}=yield cr({query:s,page:r,per_page:i});n=o}else n=yield or({page:r,per_page:i});e(y(n)),t((e=>e+1)),a(!1)})),[e,r,s,i]);(0,o.useEffect)((()=>{if(n){if(u&&u<r)return void a(!1);d()}}),[n,d,r,u]),(0,o.useEffect)((()=>(document.addEventListener("scroll",h),function(){document.removeEventListener("scroll",h)})),[]);var h=e=>{e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&a(!0)}}(),(0,o.useEffect)((()=>{r.length||(a(!0),or({page:1,per_page:t}).then((r=>{e(j(r))})).catch(console.log).finally((()=>{a(!1)})))}),[r.length,e,t]),(0,U.jsxs)("div",{className:wr,children:[(0,U.jsx)(dr,{}),n&&(0,U.jsx)(xe,{}),!n&&r.length>0&&(0,U.jsx)(ue,{cards:r})]})};const _r="zL5jDhxyHZEFGIR399CC",Ar="X1uMAynGbM_EvqQCAGKY",Er="RtBbPB1p3DrsPIhNNbBX",kr="XlkSyiFtif7y4fJ2_5Ct",Ir="WYKHJaYO1N1tQRP4PnDm";function Cr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Dr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Cr(Object(t),!0).forEach((function(r){Rr(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Cr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Rr(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Tr(e,r,t,n,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,a)}const Ur=function(){var e=c(),r=(0,i.s0)(),[t,n]=(0,o.useState)([]),[a,s]=(0,o.useState)([]),u=l(k),[d,h]=(0,o.useState)(!1);(0,o.useEffect)((()=>{h(!0);var e=(0,F.cf)((0,F.hJ)(Q,"users/".concat(u,"/cardsHistory")),(e=>{var r=e.docs.map((e=>e.data()));n(r.reverse()),h(!1)})),r=(0,F.cf)((0,F.hJ)(Q,"users/".concat(u,"/searchHistory")),(e=>{var r=e.docs.map((e=>e.data()));s(r.reverse()),h(!1)}));return()=>{e(),r()}}),[u]);var v=function(){var t,n=(t=function*(t){cr({query:t,per_page:20}).then((r=>{e(j(r.results))})).catch(console.log).finally((()=>r("/")))},function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(e){Tr(s,n,a,o,i,"next",e)}function i(e){Tr(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return d?(0,U.jsx)(xe,{}):(0,U.jsxs)("div",{className:_r,children:[(0,U.jsx)("h2",{children:"Cards you've looked at"}),null!=t&&t.length?(0,U.jsx)("ul",{className:Ar,children:t.map(((e,r)=>(0,U.jsx)("li",{children:(0,U.jsx)(ce,Dr({},e))},r)))}):(0,U.jsx)("p",{className:Ir,children:"You haven't looked at any cards yet"}),(0,U.jsx)("h2",{children:"Search history"}),null!=a&&a.length?(0,U.jsx)("ul",{className:Er,children:a.map(((e,r)=>(0,U.jsx)("li",{className:kr,onClick:()=>v(e.searchValue),children:e.searchValue},r)))}):(0,U.jsx)("p",{className:Ir,children:"You haven't searched for anything yet"})]})},Mr="vrNuVB8A4modZMRW46_n",Br="MDaoXD0zx4g0qVFozIpL",Lr="b_1Zox2nlTI8sv7BKEX4",Vr="KT2lhf6TUn2ZuPUOuFME",Gr="d44UssZEHzOGhqUKsckQ";var Fr=()=>{var e=(0,i.s0)();return(0,U.jsxs)("section",{className:Mr,children:[(0,U.jsx)("p",{className:Br,children:"404"}),(0,U.jsx)("h2",{className:Lr,children:"Page not found"}),(0,U.jsx)("nav",{children:(0,U.jsxs)("ul",{className:Vr,children:[(0,U.jsx)("li",{children:(0,U.jsx)("button",{onClick:()=>e(-1),className:Gr,type:"button",children:"Back"})}),(0,U.jsx)("li",{children:(0,U.jsx)("button",{onClick:()=>e("/",{replace:!0}),className:Gr,type:"button",children:"Main page"})})]})})]})},Hr=(0,d.hg)("auth/checkAuth",((e,r)=>{var{dispatch:t}=r;(0,K.Aj)(z,(e=>t(e?v({email:e.email,uid:e.uid}):f())))}));const qr=function(){var e=c(),r=l(C);return(0,o.useEffect)((()=>{e(Hr())}),[e]),"LOADING"===r?(0,U.jsx)(xe,{fullscreen:!0}):(0,U.jsx)(De,{children:(0,U.jsxs)(i.Z5,{children:[(0,U.jsx)(i.AW,{path:"/",element:(0,U.jsx)(Nr,{})}),(0,U.jsx)(i.AW,{path:"/login",element:(0,U.jsx)(gr,{})}),(0,U.jsx)(i.AW,{path:"/register",element:(0,U.jsx)(xr,{})}),(0,U.jsx)(i.AW,{path:"/card",element:(0,U.jsx)(jr,{})}),(0,U.jsx)(i.AW,{path:"/favorites",element:(0,U.jsx)(G,{component:Pr})}),(0,U.jsx)(i.AW,{path:"/history",element:(0,U.jsx)(G,{component:Ur})}),(0,U.jsx)(i.AW,{path:"*",element:(0,U.jsx)(Fr,{})})]})})};(0,n.s)(document.getElementById("root")).render((0,U.jsx)(a.zt,{store:R,children:(0,U.jsx)(s.VK,{basename:Ze,children:(0,U.jsx)(qr,{})})}))}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var t=a[e]={exports:{}};return n[e](t,t.exports,s),t.exports}s.m=n,e=[],s.O=(r,t,n,a)=>{if(!t){var o=1/0;for(u=0;u<e.length;u++){for(var[t,n,a]=e[u],i=!0,c=0;c<t.length;c++)(!1&a||o>=a)&&Object.keys(s.O).every((e=>s.O[e](t[c])))?t.splice(c--,1):(i=!1,a<o&&(o=a));if(i){e.splice(u--,1);var l=n();void 0!==l&&(r=l)}}return r}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,n,a]},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);s.r(a);var o={};r=r||[null,t({}),t([]),t(t)];for(var i=2&n&&e;"object"==typeof i&&!~r.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((r=>o[r]=()=>e[r]));return o.default=()=>e,s.d(a,o),a},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var n=t.length-1;n>-1&&!e;)e=t[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{var e={143:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var n,a,[o,i,c]=t,l=0;if(o.some((r=>0!==e[r]))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var u=c(s)}for(r&&r(t);l<o.length;l++)a=o[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},t=self.webpackChunkgallery=self.webpackChunkgallery||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var o=s.O(void 0,[809],(()=>s(232)));o=s.O(o)})();
//# sourceMappingURL=97a8617168b6069be2f9.js.map